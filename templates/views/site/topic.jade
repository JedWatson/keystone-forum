extends ../../layouts/default

include ../../mixins/commenting

block content
	.container
		.row
			.col-sm-9
				h4: a(href='/').text-muted &larr; Back to all questions
				hr
				article.topic-details
					header.topic-details__header
						h1.heading=topic.name
						if topic.category
							a(href='/newest/' + topic.category.key).topic-category
								span(class=topic.category.key).category-indicator
								span= topic.category.name
						if topic.author || topic.publishedAt
							span.subheading
								if topic.publishedAt
									span  started on  
									= topic._.publishedAt.format('dddd, D MMM YYYY')
								if topic.author
									span  by 
									a(href=topic.author.url)= topic.author.name.full
								if replies.length
									|  &middot; 
									a(href='#answers')= plural(replies.length, '* answer', '* answers')
					.topic-details__body
						.media
							a(href='/profile/' + topic.author.key).pull-left
								img(src=topic.author.photo.exists ? topic.author._.photo.thumbnail(60,60) : 'http://placehold.it/60x60', alt=topic.author.name.full, width=60, height=60).img-avatar
							.media-body.media-body-column
								p.hidden-xs.text-muted
									strong: a(href='/profile/' + topic.author.key)=topic.author.name.full
									if topic.publishedAt
										|  &middot; 
										span #{moment(topic.publishedAt).fromNow()}
								.details-content-wrapper!=topic.content.full.html
					
					//-comments
					#answers.topic-details__footer
						if replies.length
							h4.text-muted=plural(replies.length, '* answer', '* answers')
							+comment-thread(replies)
						+comment-form()
			.col-sm-3
				h4.text-muted Found a bug?
				hr
				p If you're experiencing what appears to be a bug or something that doesn't seem to be working correctly, please 
					a(href='https://github.com/JedWatson/keystone/issues') log&nbsp;an&nbsp;issue
					|  in the Github project